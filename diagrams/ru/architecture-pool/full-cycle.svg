<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="969px" preserveAspectRatio="none" style="width:553px;height:969px;background:#FFFFFF;" version="1.1" viewBox="0 0 553 969" width="553px" zoomAndPan="magnify"><title>&#1055;&#1086;&#1083;&#1085;&#1099;&#1081; &#1094;&#1080;&#1082;&#1083; acquire &#8594; use &#8594; release</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="260.2031" x="142.6602" y="29.5332">&#1055;&#1086;&#1083;&#1085;&#1099;&#1081; &#1094;&#1080;&#1082;&#1083; acquire &#8594; use &#8594; release</text><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="48" x2="48" y1="93.8281" y2="915.5625"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="183.3994" x2="183.3994" y1="93.8281" y2="915.5625"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="334.6602" x2="334.6602" y1="93.8281" y2="915.5625"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="413.1426" x2="413.1426" y1="93.8281" y2="915.5625"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="496.8184" x2="496.8184" y1="93.8281" y2="915.5625"/><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="87.7051" x="5" y="61.2188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73.7051" x="12" y="82.752">&#1050;&#1086;&#1088;&#1091;&#1090;&#1080;&#1085;&#1072; A</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="87.7051" x="5" y="914.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73.7051" x="12" y="936.0957">&#1050;&#1086;&#1088;&#1091;&#1090;&#1080;&#1085;&#1072; A</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="42.0205" x="162.3994" y="61.2188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28.0205" x="169.3994" y="82.752">Pool</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="42.0205" x="162.3994" y="914.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28.0205" x="169.3994" y="936.0957">Pool</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="75.4824" x="297.6602" y="61.2188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61.4824" x="304.6602" y="82.752">idle buffer</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="75.4824" x="297.6602" y="914.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61.4824" x="304.6602" y="936.0957">idle buffer</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="60.6758" x="383.1426" y="61.2188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="46.6758" x="390.1426" y="82.752">Factory</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="60.6758" x="383.1426" y="914.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="46.6758" x="390.1426" y="936.0957">Factory</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="87.7051" x="453.8184" y="43.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73.7051" x="460.8184" y="65.1426">&#1050;&#1086;&#1088;&#1091;&#1090;&#1080;&#1085;&#1072; B</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64.4492" x="465.4463" y="82.752">(&#1086;&#1078;&#1080;&#1076;&#1072;&#1077;&#1090;)</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="87.7051" x="453.8184" y="914.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73.7051" x="460.8184" y="936.0957">&#1050;&#1086;&#1088;&#1091;&#1090;&#1080;&#1085;&#1072; B</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64.4492" x="465.4463" y="953.7051">(&#1086;&#1078;&#1080;&#1076;&#1072;&#1077;&#1090;)</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="546.5234" x="0" y="125.0039"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="546.5234" y1="125.0039" y2="125.0039"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="546.5234" y1="128.0039" y2="128.0039"/><rect fill="#EEEEEE" height="24.3516" style="stroke:#000000;stroke-width:2;" width="150.3413" x="198.0911" y="113.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="132.7295" x="204.0911" y="131.3232">Acquire (&#1082;&#1086;&#1088;&#1091;&#1090;&#1080;&#1085;&#1072; A)</text><polygon fill="#181818" points="171.4097,166.5313,181.4097,170.5313,171.4097,174.5313,175.4097,170.5313" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="48.8525" x2="177.4097" y1="170.5313" y2="170.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="51.2954" x="55.8525" y="165.6748">acquire()</text><polygon fill="#181818" points="323.4014,196.8828,333.4014,200.8828,323.4014,204.8828,327.4014,200.8828" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="183.4097" x2="329.4014" y1="200.8828" y2="200.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="30.3481" x="190.4097" y="196.0264">pop()</text><polygon fill="#181818" points="194.4097,227.2344,184.4097,231.2344,194.4097,235.2344,190.4097,231.2344" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="188.4097" x2="334.4014" y1="231.2344" y2="231.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59.2617" x="200.4097" y="226.3779">&#1088;&#1077;&#1089;&#1091;&#1088;&#1089; #1</text><line style="stroke:#181818;stroke-width:1;" x1="183.4097" x2="225.4097" y1="261.5859" y2="261.5859"/><line style="stroke:#181818;stroke-width:1;" x1="225.4097" x2="225.4097" y1="261.5859" y2="274.5859"/><line style="stroke:#181818;stroke-width:1;" x1="184.4097" x2="225.4097" y1="274.5859" y2="274.5859"/><polygon fill="#181818" points="194.4097,270.5859,184.4097,274.5859,194.4097,278.5859,190.4097,274.5859" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88.1753" x="190.4097" y="256.7295">active_count++</text><polygon fill="#181818" points="59.8525,300.9375,49.8525,304.9375,59.8525,308.9375,55.8525,304.9375" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="53.8525" x2="182.4097" y1="304.9375" y2="304.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59.2617" x="65.8525" y="300.0811">&#1088;&#1077;&#1089;&#1091;&#1088;&#1089; #1</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="546.5234" x="0" y="334.1133"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="546.5234" y1="334.1133" y2="334.1133"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="546.5234" y1="337.1133" y2="337.1133"/><rect fill="#EEEEEE" height="24.3516" style="stroke:#000000;stroke-width:2;" width="229.23" x="158.6467" y="322.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="211.6182" x="164.6467" y="340.4326">Acquire (&#1082;&#1086;&#1088;&#1091;&#1090;&#1080;&#1085;&#1072; B, &#1087;&#1091;&#1083; &#1085;&#1072; max)</text><polygon fill="#181818" points="194.4097,375.6406,184.4097,379.6406,194.4097,383.6406,190.4097,379.6406" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="188.4097" x2="496.6709" y1="379.6406" y2="379.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80.2153" x="200.4097" y="374.7842">acquire(5000)</text><line style="stroke:#181818;stroke-width:1;" x1="183.4097" x2="225.4097" y1="409.9922" y2="409.9922"/><line style="stroke:#181818;stroke-width:1;" x1="225.4097" x2="225.4097" y1="409.9922" y2="422.9922"/><line style="stroke:#181818;stroke-width:1;" x1="184.4097" x2="225.4097" y1="422.9922" y2="422.9922"/><polygon fill="#181818" points="194.4097,418.9922,184.4097,422.9922,194.4097,426.9922,190.4097,422.9922" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137.9917" x="190.4097" y="405.1357">idle &#1087;&#1091;&#1089;&#1090;, active == max</text><line style="stroke:#181818;stroke-width:1;" x1="183.4097" x2="225.4097" y1="453.3438" y2="453.3438"/><line style="stroke:#181818;stroke-width:1;" x1="225.4097" x2="225.4097" y1="453.3438" y2="466.3438"/><line style="stroke:#181818;stroke-width:1;" x1="184.4097" x2="225.4097" y1="466.3438" y2="466.3438"/><polygon fill="#181818" points="194.4097,462.3438,184.4097,466.3438,194.4097,470.3438,190.4097,466.3438" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112.9121" x="190.4097" y="448.4873">&#1044;&#1086;&#1073;&#1072;&#1074;&#1080;&#1090;&#1100; &#1074; waiters</text><path d="M314.9121,439.4922 L314.9121,465.4922 L506.9121,465.4922 L506.9121,449.4922 L496.9121,439.4922 L314.9121,439.4922 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M496.9121,439.4922 L496.9121,449.4922 L506.9121,449.4922 L496.9121,439.4922 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="171.0376" x="320.9121" y="457.9873">&#1050;&#1086;&#1088;&#1091;&#1090;&#1080;&#1085;&#1072; B &#1087;&#1088;&#1080;&#1086;&#1089;&#1090;&#1072;&#1085;&#1086;&#1074;&#1083;&#1077;&#1085;&#1072;</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="546.5234" x="0" y="495.5195"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="546.5234" y1="495.5195" y2="495.5195"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="546.5234" y1="498.5195" y2="498.5195"/><rect fill="#EEEEEE" height="24.3516" style="stroke:#000000;stroke-width:2;" width="151.0903" x="197.7166" y="484.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="133.4785" x="203.7166" y="501.8389">Release (&#1082;&#1086;&#1088;&#1091;&#1090;&#1080;&#1085;&#1072; A)</text><polygon fill="#181818" points="171.4097,537.0469,181.4097,541.0469,171.4097,545.0469,175.4097,541.0469" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="48.8525" x2="177.4097" y1="541.0469" y2="541.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110.5571" x="55.8525" y="536.1904">release(&#1088;&#1077;&#1089;&#1091;&#1088;&#1089; #1)</text><line style="stroke:#181818;stroke-width:1;" x1="183.4097" x2="225.4097" y1="571.3984" y2="571.3984"/><line style="stroke:#181818;stroke-width:1;" x1="225.4097" x2="225.4097" y1="571.3984" y2="584.3984"/><line style="stroke:#181818;stroke-width:1;" x1="184.4097" x2="225.4097" y1="584.3984" y2="584.3984"/><polygon fill="#181818" points="194.4097,580.3984,184.4097,584.3984,194.4097,588.3984,190.4097,584.3984" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="81.6499" x="190.4097" y="566.542">active_count--</text><line style="stroke:#181818;stroke-width:1;" x1="183.4097" x2="225.4097" y1="614.75" y2="614.75"/><line style="stroke:#181818;stroke-width:1;" x1="225.4097" x2="225.4097" y1="614.75" y2="627.75"/><line style="stroke:#181818;stroke-width:1;" x1="184.4097" x2="225.4097" y1="627.75" y2="627.75"/><polygon fill="#181818" points="194.4097,623.75,184.4097,627.75,194.4097,631.75,190.4097,627.75" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114.1816" x="190.4097" y="609.8936">beforeRelease? OK</text><polygon fill="#181818" points="323.4014,654.1016,333.4014,658.1016,323.4014,662.1016,327.4014,658.1016" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="183.4097" x2="329.4014" y1="658.1016" y2="658.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96.1099" x="190.4097" y="653.2451">push(&#1088;&#1077;&#1089;&#1091;&#1088;&#1089; #1)</text><polygon fill="#181818" points="485.6709,684.4531,495.6709,688.4531,485.6709,692.4531,489.6709,688.4531" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="183.4097" x2="491.6709" y1="688.4531" y2="688.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142.6382" x="190.4097" y="683.5967">wake (&#1088;&#1077;&#1089;&#1091;&#1088;&#1089; &#1076;&#1086;&#1089;&#1090;&#1091;&#1087;&#1077;&#1085;)</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="546.5234" x="0" y="717.6289"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="546.5234" y1="717.6289" y2="717.6289"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="546.5234" y1="720.6289" y2="720.6289"/><rect fill="#EEEEEE" height="24.3516" style="stroke:#000000;stroke-width:2;" width="185.0313" x="180.7461" y="706.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="167.4194" x="186.7461" y="723.9482">Retry acquire (&#1082;&#1086;&#1088;&#1091;&#1090;&#1080;&#1085;&#1072; B)</text><polygon fill="#181818" points="194.4097,759.1563,184.4097,763.1563,194.4097,767.1563,190.4097,763.1563" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="188.4097" x2="496.6709" y1="763.1563" y2="763.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72.249" x="200.4097" y="758.2998">retry acquire</text><polygon fill="#181818" points="323.4014,789.5078,333.4014,793.5078,323.4014,797.5078,327.4014,793.5078" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="183.4097" x2="329.4014" y1="793.5078" y2="793.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="30.3481" x="190.4097" y="788.6514">pop()</text><polygon fill="#181818" points="194.4097,819.8594,184.4097,823.8594,194.4097,827.8594,190.4097,823.8594" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="188.4097" x2="334.4014" y1="823.8594" y2="823.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59.2617" x="200.4097" y="819.0029">&#1088;&#1077;&#1089;&#1091;&#1088;&#1089; #1</text><line style="stroke:#181818;stroke-width:1;" x1="183.4097" x2="225.4097" y1="854.2109" y2="854.2109"/><line style="stroke:#181818;stroke-width:1;" x1="225.4097" x2="225.4097" y1="854.2109" y2="867.2109"/><line style="stroke:#181818;stroke-width:1;" x1="184.4097" x2="225.4097" y1="867.2109" y2="867.2109"/><polygon fill="#181818" points="194.4097,863.2109,184.4097,867.2109,194.4097,871.2109,190.4097,867.2109" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88.1753" x="190.4097" y="849.3545">active_count++</text><polygon fill="#181818" points="485.6709,893.5625,495.6709,897.5625,485.6709,901.5625,489.6709,897.5625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="183.4097" x2="491.6709" y1="897.5625" y2="897.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59.2617" x="190.4097" y="892.7061">&#1088;&#1077;&#1089;&#1091;&#1088;&#1089; #1</text><!--SRC=[jLFDJi904BxtAIPweO4cUF12WeQQc1WF6iycfk0YZSZYTgjoAv1mqPFnvCLNG2869S0hpBw2J-9qgI2beXTFxVIRd- -RRofTMMM0JpZ68OxKBRw1wk00tt48JkdITmM3Zyuz-DxqALYLEHupZBeZf5jowqvDmXe-ubW5ggrQL3h2BXJMmF5WXmjUMCmyvBogiV1b4N9FYKdHBvUPq1bx52zcx3eboKL3ez7xBppiurgAfBrI-89TxAkMEMDc6qO-3uL8P8eanpIOaCyRXXO1rfPc3BclhQHCGtyW82HAG9tNwQCEh7cw2cXgaze6gWdh6xEYMJVfNh6J4lThCfsEK8AdKvVBLrEsCu0JrIRlT7ZXtCmrs0aQDhFPh1cdf7q8sz3SLYPYI6t2Tl5SVA3jFjDcUpXGBNK7s8DhnvLCU4QDImR2FQj8obio9fmGK30Efr234JNgqGtsGrZBF9gUsj-TYMup5TkPkMhdbXL7YwpC1Ok6RyF1_fBFlbVvUSPqrJdQmZbHNqYZ4zHgoQ19gDECP4hHcFrh2PucMoY-b_txATe9vPy0]--></g></svg>