<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="721px" preserveAspectRatio="none" style="width:600px;height:721px;background:#FFFFFF;" version="1.1" viewBox="0 0 600 721" width="600px" zoomAndPan="magnify"><title>Dual Notification System</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="164.917" x="213.8445" y="29.5332">Dual Notification System</text><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="42" x2="42" y1="93.8281" y2="666.8594"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="141.8213" x2="141.8213" y1="93.8281" y2="666.8594"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="247.9863" x2="247.9863" y1="93.8281" y2="666.8594"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="349.5928" x2="349.5928" y1="93.8281" y2="666.8594"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="432.0752" x2="432.0752" y1="93.8281" y2="666.8594"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="550.9028" x2="550.9028" y1="93.8281" y2="666.8594"/><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="75.4824" x="5" y="43.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="18.6758" x="33.4033" y="65.1426">Go</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61.4824" x="12" y="82.752">Goroutine</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="75.4824" x="5" y="665.8594"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="18.6758" x="33.4033" y="687.3926">Go</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61.4824" x="12" y="705.002">Goroutine</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="94.165" x="94.8213" y="61.2188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80.165" x="101.8213" y="82.752">requestChan</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="94.165" x="94.8213" y="665.8594"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80.165" x="101.8213" y="687.3926">requestChan</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="99.6064" x="198.9863" y="43.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82.4688" x="207.5552" y="65.1426">AsyncNotifier</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85.6064" x="205.9863" y="82.752">(eventfd/pipe)</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="99.6064" x="198.9863" y="665.8594"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82.4688" x="207.5552" y="687.3926">AsyncNotifier</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85.6064" x="205.9863" y="705.002">(eventfd/pipe)</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="82.4824" x="308.5928" y="43.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63.041" x="318.3135" y="65.1426">Scheduler</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68.4824" x="315.5928" y="82.752">(heartbeat)</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="82.4824" x="308.5928" y="665.8594"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63.041" x="318.3135" y="687.3926">Scheduler</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68.4824" x="315.5928" y="705.002">(heartbeat)</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="63.0205" x="401.0752" y="43.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49.0205" x="408.0752" y="65.1426">Reactor</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38.1172" x="413.5269" y="82.752">(libuv)</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="63.0205" x="401.0752" y="665.8594"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49.0205" x="408.0752" y="687.3926">Reactor</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38.1172" x="413.5269" y="705.002">(libuv)</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="74.7031" x="513.9028" y="61.2188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60.7031" x="520.9028" y="82.752">Coroutine</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="74.7031" x="513.9028" y="665.8594"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60.7031" x="520.9028" y="687.3926">Coroutine</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="593.606" x="0" y="125.0039"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="593.606" y1="125.0039" y2="125.0039"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="593.606" y1="128.0039" y2="128.0039"/><rect fill="#EEEEEE" height="24.3516" style="stroke:#000000;stroke-width:2;" width="204.0044" x="194.8008" y="113.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="186.3926" x="200.8008" y="131.3232">Fast Path: Scheduler is Active</text><polygon fill="#181818" points="129.9038,169.5313,139.9038,173.5313,129.9038,177.5313,133.9038,173.5313" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="42.7412" x2="135.9038" y1="173.5313" y2="173.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75.1626" x="49.7412" y="168.6748">send request</text><path d="M146,153.1797 L146,179.1797 L317,179.1797 L317,163.1797 L307,153.1797 L146,153.1797 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M307,153.1797 L307,163.1797 L317,163.1797 L307,153.1797 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150.6743" x="152" y="171.6748">select { case chan &lt;- req }</text><polygon fill="#181818" points="152.9038,222.2344,142.9038,226.2344,152.9038,230.2344,148.9038,226.2344" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="146.9038" x2="348.834" y1="226.2344" y2="226.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99.709" x="158.9038" y="221.3779">check_requests()</text><path d="M25,189.5313 L25,248.5313 L136,248.5313 L136,199.5313 L126,189.5313 L25,189.5313 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M126,189.5313 L126,199.5313 L136,199.5313 L126,189.5313 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="54.9263" x="31" y="208.0264">Called on</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90.3398" x="31" y="224.3779">each Scheduler</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="19.5" x="31" y="240.7295">tick</text><polygon fill="#181818" points="337.834,271.9375,347.834,275.9375,337.834,279.9375,341.834,275.9375" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="141.9038" x2="343.834" y1="275.9375" y2="275.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="60.709" x="148.9038" y="271.0811">request_id</text><polygon fill="#181818" points="539.2544,329.8164,549.2544,333.8164,539.2544,337.8164,543.2544,333.8164" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="349.834" x2="545.2544" y1="333.8164" y2="333.8164"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94.6689" x="356.834" y="328.96">spawn coroutine</text><path d="M262,288.9375 L262,363.9375 L344,363.9375 L344,298.9375 L334,288.9375 L262,288.9375 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M334,288.9375 L334,298.9375 L344,298.9375 L334,288.9375 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61.4009" x="268" y="307.4326">No system</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="29.6182" x="268" y="323.7842">calls,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="44.7827" x="268" y="340.1357">minimal</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="41.1899" x="268" y="356.4873">latency</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="593.606" x="0" y="390.5195"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="593.606" y1="390.5195" y2="390.5195"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="593.606" y1="393.5195" y2="393.5195"/><rect fill="#EEEEEE" height="24.3516" style="stroke:#000000;stroke-width:2;" width="257.4263" x="168.0898" y="379.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="239.8145" x="174.0898" y="396.8389">Slow Path: All Coroutines are Sleeping</text><polygon fill="#181818" points="129.9038,432.0469,139.9038,436.0469,129.9038,440.0469,133.9038,436.0469" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="42.7412" x2="135.9038" y1="436.0469" y2="436.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75.1626" x="49.7412" y="431.1904">send request</text><polygon fill="#181818" points="236.7896,465.3984,246.7896,469.3984,236.7896,473.3984,240.7896,469.3984" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="42.7412" x2="242.7896" y1="469.3984" y2="469.3984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="41.8882" x="49.7412" y="464.542">Notify()</text><path d="M253,449.0469 L253,475.0469 L335,475.0469 L335,459.0469 L325,449.0469 L253,449.0469 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M325,449.0469 L325,459.0469 L335,459.0469 L325,449.0469 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61.4009" x="259" y="467.542">write(fd, 1)</text><polygon fill="#181818" points="420.5854,526.2773,430.5854,530.2773,420.5854,534.2773,424.5854,530.2773" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="248.7896" x2="426.5854" y1="530.2773" y2="530.2773"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122.1479" x="255.7896" y="525.4209">epoll/kqueue wakeup</text><path d="M437,485.3984 L437,560.3984 L520,560.3984 L520,495.3984 L510,485.3984 L437,485.3984 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M510,485.3984 L510,495.3984 L520,495.3984 L510,485.3984 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="45.519" x="443" y="503.8936">Reactor</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="54.9199" x="443" y="520.2451">wakes up</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="41.9199" x="443" y="536.5967">only on</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62.1499" x="443" y="552.9482">notification</text><polygon fill="#181818" points="152.9038,584.1563,142.9038,588.1563,152.9038,592.1563,148.9038,588.1563" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="146.9038" x2="431.5854" y1="588.1563" y2="588.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99.709" x="158.9038" y="583.2998">check_requests()</text><polygon fill="#181818" points="420.5854,614.5078,430.5854,618.5078,420.5854,622.5078,424.5854,618.5078" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="141.9038" x2="426.5854" y1="618.5078" y2="618.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="60.709" x="148.9038" y="613.6514">request_id</text><polygon fill="#181818" points="539.2544,644.8594,549.2544,648.8594,539.2544,652.8594,543.2544,648.8594" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="432.5854" x2="545.2544" y1="648.8594" y2="648.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94.6689" x="439.5854" y="644.0029">spawn coroutine</text><!--SRC=[XLDBQ-Cm4BxhLmpTIm8DfTUmAOGiJK-bRAw6Cf4diR0oKgrnWbdslwyiFsgNPTSdITzZPZx9OiGI_AZHmgiJSp8QnJY6GnE4Bag5qh372YzmH5sUArTpldFMLV3jENrAHLYCDXvPu6xlCjwxI1F3T0SOOE_cZ8e-QWgoAv0JtYxcZ6reM7VTK9NnWgx4SieVlF6qJ9e1dEiEkg2yjabJK4IEXD89NeRjNF6JK8jh-TOSwsl7xG_dpDrifdQdr6O3pnW4tb2ADOpLmGJOQZ5NWir6gRs3rLEQ4jOGY7Fe4r3iXA0ovq9Qm98M-0KQ0u5ksTzNBHD-ApLsFt6ArNJvtbk5nR9pitIAPZkqbd9md76SfO19C76YKgdaiOfcdyxheQrtatyf68TjM_TuOz133jDwhmv2UYyPwrWwt6TyCMmkQ3EsACIwIMaThBlrQMsjXJ7J05XHH8cyuVD_KkkGuGN0kbisGm9zdhVA22rE-JqyBfKQsL7PNsyKadVMFfJHjYQuOKcrdtcChwF50jG-OyUsIRdov6THQl3yn_MCaN_MdmG-DVXxt7y0]--></g></svg>